pipeline {
    agent {
        docker {
            image 'postman/newman'
            args '-u 0:0' // Optionnel, selon si des permissions spécifiques sont nécessaires
        }
    }
    environment {
       
    }
    stages {
        stage('Run Newman Collection') {
            steps {
                script {
                   
                    sh '''
                        docker run -v ${WORKSPACE}:/etc/newman \
                        --workdir /etc/newman \
                        -t postman/newman \
                        run tp.json --color off --disable-unicode
                    '''
                }
            }
        }
    }
    post {
        always {
            echo 'Pipeline completed!'
        }
    }
}
