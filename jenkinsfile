pipeline {
    agent any
    stages {
        stage('Vérifier Newman') {
            steps {
                echo 'Vérification de la version de Newman...'
                bat 'C:\\Users\\ayman\\AppData\\Roaming\\npm\\newman.cmd -v' // Vérifier la version de Newman
            }
        }
        
        stage('Exécuter la collection Postman') {
            steps {
                echo 'Exécution de la collection Postman...'
                // Entourer le chemin du fichier collection et environnement de guillemets
                bat '"C:\\Users\\ayman\\AppData\\Roaming\\npm\\newman.cmd" run "C:\\Users\\ayman\\Desktop\\pratique jenkins\\postman jenkins\\tp.json"'
            }
        }
    }
}
